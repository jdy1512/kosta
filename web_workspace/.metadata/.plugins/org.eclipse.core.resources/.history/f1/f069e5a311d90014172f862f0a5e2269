package member.model.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.ArrayList;

import common.util.DataUtilListener;

import member.vo.Member;

public class MemberDAO {
	private static MemberDAO instance = new MemberDAO();

	public static MemberDAO getInstance() {
		return instance;
	}

	public Member selectMemberById(Connection conn, String id) throws SQLException {
		final String sql = "select id, password, name, email, join_date "
				+ "from member "
				+ "where id=?";
		
		PreparedStatement pstmt = conn.prepareStatement(sql);
		pstmt.setString(1, id);
		
	    java.sql.Date sqlDate = new java.sql.Date(member.getJoinDate().getTime());
		pstmt.setDate(5, sqlDate);
		
		int result = pstmt.executeUpdate();
		
		DataUtilListener.close(pstmt);
		
		return result;
	}

	public int insertMember(Connection conn, Member member) throws SQLException {
		final String sql = "insert into member values(?,?,?,?,?)";
		
		PreparedStatement pstmt = conn.prepareStatement(sql);
		pstmt.setString(1, member.getId());
		pstmt.setString(2, member.getPassword());
		pstmt.setString(3, member.getName());
		pstmt.setString(4, member.getEmail());
		
	    java.sql.Date sqlDate = new java.sql.Date(member.getJoinDate().getTime());
		pstmt.setDate(5, sqlDate);
		
		int result = pstmt.executeUpdate();
		
		DataUtilListener.close(pstmt);
		
		return result;
	}

	public ArrayList<Member> selectAllMember(Connection conn) {
		return null;
	}

	public int updateMember(Connection conn, Member member) {
		return 0;
	}

	public int deleteMemberById(Connection conn, String id) {
		return 0;
	}

}
